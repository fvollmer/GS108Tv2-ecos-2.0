/*
 * Broadcom SiliconBackplane hardware register definitions.
 *
 * Copyright (C) 2004 Broadcom Corporation
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
 *
 */

#ifndef	_SBCONFIG_H
#define	_SBCONFIG_H

/* cpp contortions to concatenate w/arg prescan */
#ifndef PAD
#define	_PADLINE(line)	pad ## line
#define	_XSTR(line)	_PADLINE(line)
#define	PAD		_XSTR(__LINE__)
#endif

#define CONFIG_BCM56218
#ifdef CONFIG_BCM56218

#define SB_SDRAM_BASE		0x00000000	/* Physical SDRAM */
#define	SB_SDRAM_SWAPPED	0x10000000	/* Byteswapped Physical SDRAM */
#define SB_ENUM_BASE    	0x18000000	/* Enumeration space base */
#define	SB_ENUM_LIM		0x18010000	/* Enumeration space limit */

#define SB_CORE_SIZE    	0x1000		/* each core gets 4Kbytes for registers */
#define	SB_MAXCORES		((SB_ENUM_LIM - SB_ENUM_BASE)/SB_CORE_SIZE)

/* IRQ defines */
#define SBIPS_INT_UART0     0
#define SBIPS_INT_UART1     1
#define SBIPS_INT_CMIC      2
#define SBIPS_INT_GPIO      3

#define	SBIPS_INT1_MASK		0x3f		/* which sbflags get routed to mips interrupt 1 */
#define	SBIPS_INT1_SHIFT	0
#define	SBIPS_INT2_MASK		0x3f00		/* which sbflags get routed to mips interrupt 2 */
#define	SBIPS_INT2_SHIFT	8
#define	SBIPS_INT3_MASK		0x3f0000	/* which sbflags get routed to mips interrupt 3 */
#define	SBIPS_INT3_SHIFT	16
#define	SBIPS_INT4_MASK		0x3f000000	/* which sbflags get routed to mips interrupt 4 */
#define	SBIPS_INT4_SHIFT	24

/* sbtpsflag */
#define	SBTPS_NUM0_MASK		0x3f		/* interrupt sbFlag # generated by this core */
#define	SBTPS_F0EN0		0x40		/* interrupt is always sent on the backplane */

/* mips address */
#define	SB_EJTAG		0xff200000	/* MIPS EJTAG space (2M) */

#define	SB_CC			0x800		/* chipcommon core */
#define	SB_MIPS			0x805		/* mips core */
#define	SB_MEMC			0x80f		/* memc sdram core */

#define SBCONFIGOFF     0xf00       /* core sbconfig regs are top 256bytes of regs */

#define SBIDH_CC_MASK       0xfff0      /* core code */
#define SBIDH_CC_SHIFT      4
#define SB_SDRAM        0x803       /* sdram core */
#define SBIDH_RC_MASK       0xf     /* revision code*/

#define SBTML_RESET     0x1     /* reset */
#define SBTML_REJ       0x2     /* reject */
#define SBTML_CLK       0x10000     /* clock enable */
#define SBTML_FGC       0x20000     /* force gated clocks on */



#define BCM53710_SDRAM      0x00000000 /* 0-128MB Physical SDRAM */
#define BCM53710_SDRAM_SZ   0x08000000 /* 128MB Physical SDRAM */
#define BCM53710_SDRAM_SWAPPED  0x10000000 /* Byteswapped Physical SDRAM */
#define BCM53710_SDRAM_SWAPPED_SZ   0x08000000 /* Byteswapped window size */
#define BCM53710_ENUM       0x18000000 /* Beginning of core enum space */

/* BCM4704 Core register space */
#define BCM53710_REG_CHIPC  0x18000000 /* Chipcommon  registers */
#define BCM53710_REG_MIPS33 0x18005000 /* MIPS core registers */
#define BCM53710_REG_MEMC   0x18008000 /* MEMC core registers */
#define BCM53710_REG_UARTS   (BCM53710_REG_CHIPC + 0x300) /* UART regs */
#define BCM53710_SDRAM_HIGH 0x80000000 /* 0-512MB Physical SDRAM */
#define BCM53710_SDRAM_HIGH_SZ  0x20000000 /* 0-512MB Physical SDRAM */
#define BCM53710_EJTAG      0xff200000 /* MIPS EJTAG space (2M) */

/* COM Ports 1/2 */
#define BCM53710_UART       (BCM53710_REG_UARTS)
#define BCM53710_UART_COM2  (BCM53710_REG_UARTS + 0x00000100)

/* Registers common to MIPS33 Core used in 4704 */
#define MIPS33_FLASH_REGION           0x1fc00000 /* Boot FLASH Region  */
#define MIPS33_EXTIF_REGION           0x1a000000 /* Chipcommon EXTIF region*/
#define MIPS33_FLASH_REGION_AUX       0x1c000000 /* FLASH Region 2*/

/* Internal Core Sonics Backplane Devices */
#define INTERNAL_UART_COM1            BCM53710_UART
#define INTERNAL_UART_COM2            BCM53710_UART_COM2
#define SB_REG_CHIPC                  BCM53710_REG_CHIPC
#define SB_REG_MIPS                   BCM53710_REG_MIPS33
#define SB_REG_MEMC                   BCM53710_REG_MEMC
#define SB_FLASH_SPACE                MIPS33_FLASH_REGION

/* RESET register */
#define ICS_SRESET_REG              0xb8000110

#define ICS_WATCHDOG_CTR_REG        0xb8000080
#define ICS_SB_CLK_FREQ             133000000


/*
 *  * Sonics Configuration Space Registers.
 *   */
#define SBIPSFLAG       0x08
#define SBTPSFLAG       0x18
#define SBTMERRLOGA     0x48        /* sonics >= 2.3 */
#define SBTMERRLOG      0x50        /* sonics >= 2.3 */
#define SBADMATCH3      0x60
#define SBADMATCH2      0x68
#define SBADMATCH1      0x70
#define SBIMSTATE       0x90
#define SBINTVEC        0x94
#define SBTMSTATELOW        0x98
#define SBTMSTATEHIGH       0x9c
#define SBBWA0          0xa0
#define SBIMCONFIGLOW       0xa8
#define SBIMCONFIGHIGH      0xac
#define SBADMATCH0      0xb0
#define SBTMCONFIGLOW       0xb8
#define SBTMCONFIGHIGH      0xbc
#define SBBCONFIG       0xc0
#define SBBSTATE        0xc8
#define SBACTCNFG       0xd8
#define SBFLAGST        0xe8
#define SBIDLOW         0xf8
#define SBIDHIGH        0xfc

#endif	/* 56218 */
#endif	/* _SBCONFIG_H */
